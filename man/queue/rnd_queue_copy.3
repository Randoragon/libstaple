.TH RND_QUEUE_COPY 3 DATE "librnd-VERSION"
.SH NAME
rnd_queue_copy \- copy contents of one queue to another
.SH SYNOPSIS
.ad l
#include <rnd.h>
.sp
int
.BR rnd_queue_copy "(struct rnd_queue"
.RI * dest ,
.br
.in 20n
const struct rnd_queue
.RI * src ,
.br
int
.RI (* cpy ")(void*, const void*))"
.in
.sp
Link with \fI-lrnd\fP.
.ad
.SH DESCRIPTION
The
.BR rnd_queue_copy ()
function copies elements one-by-one from
.IR src " to " dest .
.I dest
is expanded to fit all elements of
.IR src ,
if needed.
.br
After a successful operation, both queues are guaranteed to have identical
contents. Capacities may differ after copying, and should never be relied upon
to be equal.
.P
.I dest
must be an initialized and empty queue. Passing a non-empty queue shall
result in undefined behavior.
.P
.I src
is the queue that shall be copied from. Naturally, this implies it must be
initialized, but it needs not to contain any elements.
.P
.I cpy
is a pointer to a copy function that copies a single element from
.IR src " to " dest .
The copy function must be implemented in such a way that the first argument
.RB ( void* )
is the destination address, and the second
.RB ( "const void*" )
is the source address. Instead of an address,
.B NULL
can be passed, in which case
.BR memcpy (3)
shall be used instead.
.P
The copy function pointed to by
.I cpy
must return 0 for success, and anything else for failure. In debug mode, the
caught error code (if any) is printed on stderr.
.P
The copy function can be custom-tailored to do more than just a copy operation.
For similar purposes, see also
.BR rnd_queue_foreach (3).
.SH RETURN VALUE
If successful, the
.BR rnd_queue_copy ()
function shall return 0. Otherwise, it shall return a code indicating the error.
.SH ERRORS
The
.BR rnd_queue_copy ()
function shall fail if:
.IP \fBRND_EINVAL\fP 1.5i
Either
.IR src " or " dest
are null pointers (debug mode only).
.IP \fBRND_ENOMEM\fP 1.5i
Failed to enlarge
.I dest
due to insufficient memory.
.IP \fBRND_EHANDLER\fP 1.5i
.I cpy
returned non-0 for some queue element.
.SH CONFORMING TO
See
.BR librnd (7).
.SH SEE ALSO
.ad l
.BR librnd (7),
.BR rnd_queue (7),
.BR rnd_queue_create (3),
.BR rnd_queue_destroy (3),
.BR rnd_queue_clear (3),
.BR rnd_queue_foreach (3),
.BR rnd_queue_push (3),
.BR rnd_queue_insert (3),
.BR rnd_queue_qinsert (3),
.BR rnd_queue_peek (3),
.BR rnd_queue_pop (3),
.BR rnd_queue_remove (3),
.BR rnd_queue_qremove (3),
.BR rnd_queue_get (3),
.BR rnd_queue_set (3),
.BR rnd_queue_print (3)
